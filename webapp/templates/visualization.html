{% extends "base.html" %}
{% block title %}Visualization{% endblock %}
{% block content %}
<h1>Visualization</h1>

<form method="POST">
  <label for="company">Select Company:</label>
  <select name="company" id="company" required>
    <option value="">-- Choose --</option>
    {% for comp in tickers %}
      <option value="{{ comp }}" {% if company == comp %}selected{% endif %}>{{ comp }}</option>
    {% endfor %}
  </select>

  <label for="model">Select Model:</label>
  <select name="model" id="model" required>
    <option value="">-- Choose --</option>
    {% for m in models %}
      <option value="{{ m }}" {% if model == m %}selected{% endif %}>{{ m }}</option>
    {% endfor %}
  </select>

  <label for="plot_type">Select Plot Type:</label>
  <select name="plot_type" id="plot_type" required>
    <option value="">-- Choose --</option>
    {% for pt in plot_types %}
      <option value="{{ pt }}" {% if plot_type == pt %}selected{% endif %}>{{ pt }}</option>
    {% endfor %}
  </select>

  <button type="submit">Generate Plot</button>
</form>

{% if plot_url %}
  <h2>Visualization for {{ company }} - {{ model }} ({{ plot_type }})</h2>
  <img src="data:image/png;base64,{{ plot_url }}" alt="Visualization Plot">
{% endif %}

{% endblock %}
